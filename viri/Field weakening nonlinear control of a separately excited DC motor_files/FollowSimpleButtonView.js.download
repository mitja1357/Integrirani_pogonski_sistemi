"use strict";YUI.add("rg.views.application.FollowSimpleButtonView",function(a){a.namespace("rg.views.application"),a.rg.views.application.FollowSimpleButtonView=a.Base.create("application.FollowSimpleButtonView",a.rg.WidgetView,[],{events:{".js-follow":{click:"handleFollow"},global:{profileFollowed:"onProfileFollowed"}},handleFollow:function(b){b.preventDefault(),b.stopPropagation();var c=this.get("container");c.setAttribute("disabled"),c.one(".action-follow").hide(),c.one(".ajax-loading-small").show(),a.fire("accountFollowed",this.get("followParams")),a.rg.ajax(this.get("followAction"),this.get("followParams"),this.handleFollowResponse,this,null,"POST")},handleFollowResponse:function(b){var c=this.get("container");if(c.one(".ajax-loading-small").hide(),b.success)this.handleFollowed();else{var d=b.errors;d.reason?d.reason.following?this.handleFollowed():a.rg.notify(d.message,"warning"):(a.rg.notify(d,"warning"),c.one(".action-follow").show())}},handleFollowed:function(b){b=b||{};var c=this.get("container");c.one(".action-confirm").show(),b.key=this.get("accountKey"),this.fire("followed",b),a.fire("profileFollowed",b)},onProfileFollowed:function(a){if(a.key===this.get("accountKey")){var b=this.get("container");b.one(".ajax-loading-small").hide(),b.one(".action-confirm").show(),b.one(".action-follow").hide()}}},{ATTRS:{followAction:{value:""},followParams:{value:""},accountKey:{}}})},"1.0.0",{requires:["rg-header-notify"]});
