"use strict";YUI.add("rg.views.literature.PublicationActionFollowView",function(a){a.namespace("rg.views.literature"),a.rg.views.literature.PublicationActionFollowView=a.Base.create("literature.PublicationActionFollowView",a.rg.WidgetView,[],{events:{".js-follow-publication":{click:"toggleFollow",mouseenter:"showUnfollow",mouseleave:"hideUnfollow"},global:{"PublicationActionFollow:stateChange":"updateState",fulltextRequested:"updateState",publicationCommentCreated:"updateStateAfterComment","PublicationCommentView:newReply:completed":"updateStateAfterComment",publicationLiked:"updateState"}},afterRendered:function(){this.data.isReader&&this.get("triggerUnfollow")&&this.toggleFollow()},updateState:function(a){a.publicationUid===this.data.publicationUid&&a.widgetId!==this.data.widgetId&&this.reload()},updateStateAfterComment:function(a){a.publicationUid!==this.data.publicationUid||a.widgetId===this.data.widgetId||this.data.isReader||this.reload()},showUnfollow:function(){if(this.data.isReader){var a=this.get("container");"unfollow"===this.data.unfollowText&&a.setStyle("width",window.getComputedStyle(a.getDOMNode(),null).getPropertyValue("width")),a.set("innerText",this.data.unfollowText)}},hideUnfollow:function(){this.data.isReader&&this.get("container").set("innerText",this.data.followingText)},toggleFollow:function(b){b&&b.preventDefault(),this.get("container").setStyle("width","auto");var c={publicationUid:this.data.publicationUid,context:this.data.context,msrp:this.data.milestoneParam};a.rg.ajaxDbwAware(this.get("requestEndpoint"),c,function(b){b.success&&(a.rg.notify(b.result[0],"success"),this.data.isReader&&(this.data.requestProjectAfterFollow?a.rg.ajaxDbwAware(this.get("canRequestProjectUrl"),{},function(b){b.success&&(b.result.canRequestProject?a.fire("PublicationActionFollow:showRequestProjectNotification",b.result.targetAccountIds):a.fire("PublicationActionFollow:showShareAlert",this.data.publicationTypeForDisplay))},this,null,"POST"):a.fire("PublicationActionFollow:showShareAlert",this.data.publicationTypeForDisplay)))},this,null,this.data.isReader?"DELETE":"POST"),this.data.followButtonCopyExperimentGoal&&this.data.followButtonCopyExperimentViewId&&a.rg.ajax("application.AjaxCommon.ajaxScoreGoal.html",{goal:this.data.followButtonCopyExperimentGoal,viewIds:[this.data.followButtonCopyExperimentViewId]}),this.data.isReader=!this.data.isReader,this.set("triggerUnfollow",!1),this.data.isReader?this.get("container").addClass("active"):this.get("container").removeClass("active"),this.render({refresh:!0}),a.fire("PublicationActionFollow:stateChange",{publicationUid:this.data.publicationUid,widgetId:this.data.widgetId})}},{ATTRS:{requestEndpoint:{value:""},canRequestProjectUrl:{value:""},triggerUnfollow:{value:!1},defaultContext:{value:null}}})},"0.0.1",{requires:["rg-header-notify","transition","rg-tooltip"]});
"use strict";YUI.add("rg.views.publication.PublicationCommentsCursorPromoView",function(a){a.namespace("rg.views.publication"),a.rg.views.publication.PublicationCommentsCursorPromoView=a.Base.create("publication.PublicationCommentsCursorPromoView",a.rg.WidgetView,[],{events:{global:{"PublicationCommentsCursorPromo:show":"show","PublicationCommentsCursorPromo:hide":"hide","PublicationCommentsCursorPromo:dismiss":"dismiss"}},afterRendered:function(){var b=this.get("container"),c=b.one(".js-promo-content"),d=c.cloneNode(!0);a.one("body").append(d),c.remove(!0),this.promoNode=d},attachEventListener:function(){this.listener=a.one("window").on("mousemove",function(a){this.promoNode&&this.promoNode.setStyles({left:a.clientX+20,top:a.clientY-15})},this)},detachEventListener:function(){this.listener&&"function"==typeof this.listener.detach&&this.listener.detach()},show:function(){this.promoNode&&(this.attachEventListener(),this.promoNode.show())},hide:function(){this.promoNode&&(this.promoNode.hide(),this.detachEventListener())},dismiss:function(){this.hide(),this.promoNode.remove(!0),this.promoNode=null,a.rg.ajax(this.data.dismissPromoEndpoint,function(){this.remove(!0)})}})},"1.0.0",{requires:["rg-ajax"]});
