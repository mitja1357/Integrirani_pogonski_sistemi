"use strict";YUI.add("rg-tooltip",function(a){a.namespace("rg.widget");var b=a.Base.create("alignable",a.Widget,[a.WidgetPosition,a.WidgetPositionAlign]),c=a.Base.create("TooltipPlugin",a.Plugin.Base,[],{initializer:function(){if("mouseenter"!==this.get("type")||!a.UA.touchEnabled){var c=this.get("host"),d=new b({render:!1,visible:!0,zIndex:100}),e=new b({render:!1,visible:!1,zIndex:100});this.getAttrsFromData(),c.ancestor(".y-popup-container")&&e.get("boundingBox").addClass("dialog-tooltip"),e.get("boundingBox").addClass("yui3-tooltip"),e.get("contentBox").addClass("tt-container"),e.get("contentBox").addClass("tt-container-"+this.get("align")),e.get("boundingBox").addClass(this.get("additionalClasses")),d.get("contentBox").addClass("tt-arrow"),d.get("contentBox").addClass("tt-arrow-"+this.get("align")),this.innerContainer=a.Node.create("<div></div>"),this.innerContainer.addClass("tooltip-inner"),e.get("contentBox").append(this.innerContainer),this.get("width")&&(this.innerContainer.setStyle("width",this.get("width")),this.innerContainer.setStyle("maxWidth","none")),this.get("minWidth")&&(this.innerContainer.setStyle("minWidth",this.get("minWidth")),this.innerContainer.setStyle("maxWidth","none")),this.eventHandlers=[],"mouseenter"===this.get("type")?this.eventHandlers.push(c.on("mouseover",this.show,this),c.on("mouseout",this._hide,this)):"click"===this.get("type")?(this.get("closeOnOutsideClick")&&e.plug(a.Plugin.OverlayAutohide),this.eventHandlers.push(c.on("click",this._onClick,this))):"focus"===this.get("type")?this.eventHandlers.push(c.on("focus",this.hide,this)):"togglefocus"===this.get("type")&&this.eventHandlers.push(c.on("focus",this.show,this),c.on("blur",this.hide,this)),this.eventHandlers.push(e.get("boundingBox").delegate("click",this.hide,this.get("tooltipCloseSelector"),this)),this.get("persistWhenMouseover")&&(e.on("hover",function(){this._hover||(this._hover=!0,this.show())},this),e.on("mouseleave",function(){this._hover&&(this._hover=!1,this._hide())},this));var f=this.get("overlayOffset"),g=this.get("arrowOffset");(f[0]||f[1])&&e.on("xyChange",function(a){a.newVal[0]=a.newVal[0]+f[0],a.newVal[1]=a.newVal[1]+f[1]}),(g[0]||g[1])&&d.on("xyChange",function(a){a.newVal[0]=a.newVal[0]+g[0],a.newVal[1]=a.newVal[1]+g[1]}),this.set("overlay",e),this.set("arrow",d)}},destructor:function(){this.get("overlay")&&(this.hide(),a.Array.each(this.eventHandlers,function(a){a.detach()}),this.get("overlay").destroy(!0))},getAttrsFromData:function(){var b=this.get("host"),c=["align","renderTarget","width"];a.Array.each(c,function(a){var c=b.getData("tt-"+a);c&&this.set(a,c)},this)},_onClick:function(){this.get("overlay").get("visible")?this.hide():this.show()},show:function(){this._showTooltip=!0;var b=this.get("delay"),c=this;b>0?this._timer||(this._show(!0),this._timer=a.later(b,this,function(){c._showTooltip&&c._show(),c._timer=null})):this._show()},_show:function(b){var c=this,d=a.Lang,e=this.get("host"),f=this.get("contentFnCtx"),g=this.get("contentFn"),h=this.get("overlay"),i=this.get("arrow"),j=!1;h.get("rendered")||(h.render(this.get("renderTarget")),i.render(h.get("contentBox")),j=!0,this.eventHandlers.push(this.after("contentChange",function(){c._show(!c._showTooltip)})),this.eventHandlers.push(a.before("windowresize",function(){h.get("visible")&&(c.reposition(),h.show())}))),e.hasClass("tooltip-disabled")||((this.get("updateContentOnShow")||j)&&(d.isUndefined(f)||d.isUndefined(g)?d.isObject(this.get("content"))&&this.get("content").NAME&&"node"==this.get("content").NAME?(this.innerContainer.empty(),this.innerContainer.append(this.get("content"))):this.innerContainer.setContent(this.get("content")):this.innerContainer.setContent(g.call(f,this))),this.reposition(),b||h.show())},reposition:function(){var a=this.get("overlay");a.get("boundingBox").removeClass("tt-align-top"),a.get("boundingBox").removeClass("tt-align-bottom"),a.get("boundingBox").removeClass("tt-align-right"),a.get("boundingBox").removeClass("tt-align-left"),this.get("position").call(this)},_hide:function(b){var c=this.get("delay"),d=this;this._showTooltip=!1,c>0?a.later(200,this,function(){d._showTooltip||d.hide(b),d._timer=null}):this.hide(b)},hide:function(b){var c=this.get("host").generateID(),d=null;b&&b.relatedTarget&&b.relatedTarget.ancestor&&(d=b.relatedTarget.ancestor("#"+c,!0)),b&&null!==d||this.get("persistWhenMouseover")&&this._hover||(this._showTooltip=!1,this._timer&&this._timer.cancel&&a.Lang.isFunction(this._timer.cancel)&&(this._timer.cancel(),this._timer=null),this.get("overlay").hide())}},{NS:"tooltip",ATTRS:{updateContentOnShow:{value:!0},renderTarget:{value:"body"},align:{value:"top"},additionalClasses:{value:""},tooltipCloseSelector:{value:".js-tooltip-close"},width:{value:null},minWidth:{value:null},content:{value:""},type:{value:"mouseenter"},overlay:{value:null},arrow:{value:null},contentFnCtx:{validator:function(b){return a.Lang.isObject(b)}},contentFn:{validator:function(b){return a.Lang.isFunction(b)}},closeOnOutsideClick:{value:!0},arrowOffset:{value:[0,0]},overlayOffset:{value:[0,0]},delay:{value:0},persistWhenMouseover:{value:!1},position:{value:function(){var a=this.get("host"),b=this.get("overlay"),c=this.get("arrow");switch(this.get("align")){case"bottom":b.get("boundingBox").addClass("tt-align-bottom"),b.align(a,["tc","bc"]),c.align(a,["tc","bc"]);break;case"left":b.get("boundingBox").addClass("tt-align-left"),b.align(a,["rc","lc"]),c.align(a,["rc","lc"]);break;case"right":b.get("boundingBox").addClass("tt-align-right"),b.align(a,["lc","rc"]),c.align(a,["lc","rc"]);break;default:b.get("boundingBox").addClass("tt-align-top"),b.align(a,["bc","tc"]),c.align(a,["bc","tc"])}}}}});a.rg.widget.Alignable=b,a.rg.widget.TooltipPlugin=c},"0.0.1",{requires:["overlay","transition","gallery-overlay-extras"]});
"use strict";YUI.add("rg.core.form.ErrorPopoverPlugin",function(a){a.namespace("rg.core.form"),a.rg.core.form.ErrorPopoverPlugin=a.Base.create("ErrorPopoverPlugin",a.rg.widget.TooltipPlugin,[],{initializer:function(){var b=this.get("host"),c=this.get("overlay"),d=c.get("boundingBox");a.Lang.isUndefined(b.tooltip)||b.tooltip.get("overlay").get("boundingBox").addClass("popover-hidden"),d.addClass("error-popover"),this.get("fieldName")&&d.addClass("error-popover-"+this.get("fieldName"))},destructor:function(){var b=this.get("host");if(!a.Lang.isUndefined(b.tooltip)){var c=b.tooltip.get("overlay");c.get("boundingBox").removeClass("popover-hidden"),this.get("overlay").destroy(!0)}}},{NS:"errorPopover",ATTRS:{align:{value:"right"},type:{value:"manual"},fieldName:{}}})},"0.0.1",{requires:["rg-tooltip"]});
"use strict";YUI.add("rg-validation",function(a){a.namespace("rg.validation");var b=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,c=/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))?$/;a.rg.validation.isValidMail=function(a){var c=b.test(a);return!!c||(a=a.toLocaleLowerCase?a.toLocaleLowerCase():a.toLowerCase(),b.test(a))},a.rg.validation.isValidIpv4=function(a){return c.test(a)},a.rg.validation.sanitizeFormFieldName=function(a){return a.replace(/([\[\]])/g,"\\$1")}},"0.0.1");
"use strict";YUI.add("rg.WidgetView",function(a){a.namespace("rg");var b=a.Lang.isNull,c=a.Lang.isUndefined,d=a.rg.validation.sanitizeFormFieldName,e=function b(c){var d,e,f;if(Helpers.isRenderableWidget(c))return c.id;if(a.Lang.isArray(c)){d=[];for(f in c)c.hasOwnProperty(f)&&(e=b(c[f]),null!==e&&d.push(e));return d}if(a.Lang.isObject(c)){d={};for(f in c)c.hasOwnProperty(f)&&(e=b(c[f]),null!==e&&(d[f]=e));return d}return null},f=function(a){for(var b=a.get("offsetTop"),c=a.get("offsetLeft"),d=a.get("offsetWidth"),e=a.get("offsetHeight");a.get("offsetParent");)a=a.get("offsetParent"),b+=a.get("offsetTop"),c+=a.get("offsetLeft");return b>=window.pageYOffset&&c>=window.pageXOffset&&b+e<=window.pageYOffset+window.innerHeight&&c+d<=window.pageXOffset+window.innerWidth},g=a.Base.create("DestroyWidget",a.Plugin.Base,[],{initializer:function(a){this.widget=a.widget},destructor:function(){this.widget.destroy()}},{NS:"DestroyWidget"});a.rg.WidgetView=a.Base.create("WidgetView",a.Base,[],{initializer:function(b){this.id=b.id||"",this.data=b.data||{},this.partials=b.partials,this.viewClass=b.viewClass||null,this.widgetUrl=b.widgetUrl||null,this.template=b.template||null,this.compiledTemplate=b.compiledTemplate||null,this.templateExtensions=b.templateExtensions||[],this.templateName=b.templateName||null,this.yuiModules=b.yuiModules||[],this.events=a.merge(b.events||{},this.events),this._attachedViewEvents=[],this._childWidgets={},this._isYUI=b._isYUI,this.pageLayout=b.pageLayout,this.pageTitle=b.pageTitle,this.collectQueueCacheKey=b.collectQueueCacheKey,this.data.widgetId||(this.data.widgetId=this.id),this.on("rendered",function(){var b=this.get("container");if(b){if(Helpers.time("After rendered "+this.id),this.data.debugInfo&&b.setAttribute("data-debugInfo",this.data.debugInfo),this.afterRendered&&a.Lang.isFunction(this.afterRendered))if(a.config.debug)this.afterRendered();else try{this.afterRendered()}catch(b){a.error("Error calling afterRendered of widget "+this.id,b)}Helpers.timeEnd("After rendered "+this.id)}else a.log("widget: "+this.id+" is not properly implemented. widgetId missing?","warn");Helpers.timeEnd("FULL RENDER "+this.id)},this)},success:!0,errors:[],addChild:function(b,c){if(b&&c){var d=c.data.widgetId;this._childWidgets[d]=c;var e=b,f=this.getChildIds();if(b.indexOf(".")>=0){var g=b.split(".");for(e=g.splice(g.length-1,1);g.length>0;){if(!f)return;f=f[g.shift()]}}f&&(f[e]&&a.Lang.isArray(f[e])?f[e].push(d):f[e]=d)}},getChildIds:function(){return this.childIds||(Helpers.time("Extract child ids "+this.id),this.childIds=e(this.data),Helpers.timeEnd("Extract child ids "+this.id)),this.childIds},getChild:function(b){var c;if(b.indexOf(".")>=0){for(var d=b.split("."),e=this.getChildIds();d.length>0;){if(!e)return null;e=e[d.shift()]}c=e}else c=this.getChildIds()[b];if(!c)return null;if(a.Lang.isArray(c)){var f=[],g=a.clone(c,!0);return a.Array.each(g,function(a){var b=this.getChildById(a);b&&f.push(b)},this),f}return this.getChildById(c)},getChildById:function(a){var b=this._childWidgets[a];if(b&&b.get("container"))return this._childWidgets[a];var c=this.get("container").one("#"+a);if(!c)return this.removeChildById(a),null;var d=c.getData("widget");return this._childWidgets[a]=d,d},removeChildById:function(b){var c=function b(c,d){for(var e in c)if(c.hasOwnProperty(e)){var f=c[e];f===d?a.Lang.isArray(c)?c.splice(e,1):delete c[e]:a.Lang.isObject(f)&&b(f,d)}};delete this._childWidgets[b],c(this.getChildIds(),b)},setContainer:function(b){b&&(b.hasOwnProperty("domNode")&&(b=a.one(b.domNode)),Helpers.time("Sent container "+this.id),b||this.get("container")&&this.get("container").purge(!0),this.set("container",b),b&&(b.plug(g,{widget:this}),b.setData("widget",this),b.addClass("js-widgetContainer"),this.attachEvents(this.events)),Helpers.timeEnd("Sent container "+this.id))},destructor:function(){var a=this.get("container");this.detachEvents(),a&&a.purge(),this.set("container",null)},validateResponse:function(b){var c=this.get("container"),e=c.all(".control-group, .js-error-clear");if(e.each(function(b){b.unplug(a.rg.core.form.ErrorPopoverPlugin)}),c.all(".error").removeClass("error"),!b.success){var g=b.errors;a.Object.each(g,function(b,e){if(0===e)a.rg.notify(b,"warning");else{e=d(e);var f=c.one(".error-highlight-"+e);f&&f.addClass("error");var g=c.one(".error-"+e);if(g){var h=this.get("errorPopoverConfig"),i={content:a.Lang.isString(b)?b:b[0],fieldName:e};h&&(i=a.merge(h,i)),g.hasClass("error-align-left")?i.align="left":g.hasClass("error-align-right")?i.align="right":g.hasClass("error-align-top")?i.align="top":g.hasClass("error-align-bottom")&&(i.align="bottom"),g.plug(a.rg.core.form.ErrorPopoverPlugin,i),g.errorPopover.show()}}},this);var h=c.all(".error").shift();if(h&&!f(h)){var i=parseInt(h.getY())-60;i=i<0?0:i,a.rg.scrollTo(a.one("document"),i,.2)}return!1}return!0},validateField:function(b,c){var e=this.get("container"),f=d(b.get("name")),g=e.one(".error-highlight-"+f),h=e.one(".error-"+f);if(g&&g.removeClass("error"),h&&h.unplug(a.rg.core.form.ErrorPopoverPlugin),!c.success){if(g&&g.addClass("error"),h){var i=this.get("errorPopoverConfig"),j={content:c.errors[b.get("name")][0],fieldName:f};i&&(j=a.merge(i,j)),h.plug(a.rg.core.form.ErrorPopoverPlugin,j),h.errorPopover.show()}return!1}return!0},validateFieldFromData:function(b,c,d){var e=this.get("container"),f=e.one(".error-highlight-"+c),g=e.one(".error-"+c);if(f&&f.removeClass("error"),g&&g.unplug(a.rg.core.form.ErrorPopoverPlugin),!b&&g){var h=this.get("errorPopoverConfig"),i={content:d,fieldName:c};h&&(i=a.merge(h,i)),f&&f.addClass("error"),g&&(g.plug(a.rg.core.form.ErrorPopoverPlugin,i),g.errorPopover.show())}},updateData:function(b){this.data=a.merge(this.data,b)},attachEvents:function(d){Helpers.time("Attach events "+this.id);var e,f,g,h,i=this.get("container");this.detachEvents(),d=d||this.events,a.rg.supportsPushState()&&this._attachedViewEvents.push(i.delegate("click",a.rg.widget.handleAjaxPageLoad,"a.ajax-page-load",this));for(h in d)if(d.hasOwnProperty(h)){f=d[h];for(g in f)f.hasOwnProperty(g)&&(e=f[g],"string"==typeof e&&(e=this[e]),(c(e)||b(e))&&(a.log("Event handler not found for ["+g+"] on ["+h+"]","warn"),e=function(){}),"global"===h?this._attachedViewEvents.push(a.on(g,e,this)):"submit"===h?i.one(g)&&this._attachedViewEvents.push(i.one(g).on(h,e,this)):"click"==g?!function(a,b,c,d,e){e._attachedViewEvents.push(a.delegate(b,function(a){var b=a.currentTarget;return b.hasClass("btn-inactive")||b.hasClass("btn-disabled")||b.getAttribute("disabled")?void a.preventDefault():void c.call(e,a)},d,e))}(i,g,e,h,this):"change"==g&&a.UA.ie>0&&a.UA.ie<9?(this.get("container").all(h).each(function(a){this._attachedViewEvents.push(a.on("click",function(){this.blur()}))},this),this.get("container").all(h).each(function(a){this._attachedViewEvents.push(a.on(g,e,this))},this)):"submit"==g?this._attachedViewEvents.push(i.one(h).on(g,e,this)):this._attachedViewEvents.push(i.delegate(g,e,h,this)))}Helpers.timeEnd("Attach events "+this.id)},detachEvents:function(){a.Array.each(this._attachedViewEvents,function(a){a.detach()}),this._attachedViewEvents=[]},reload:function(a,b,c){var d=this.widgetUrl,e=this.get("container");widgetLoader.loadWidget(d,a,function(a){try{var d={replace:e,before:b,after:c};widgetRenderer.renderWidget(a,d)}catch(a){e.remove(!0)}})},getDefaultDialogConfig:function(){return{}},render:function(a){widgetRenderer.renderWidget(this,a)}},{NAME:"view",ATTRS:{container:{value:null}}}),a.rg.WidgetView.getInstance=function(b){var c,d=b.viewClass;a.Lang.isString(d)||(d="WidgetView"),c=a.Object.getValue(a.rg,d.split(".")),a.Lang.isObject(c)||(c=a.rg.WidgetView);var e=new c(b);return e.setAttrs(b.attrs),e},a.rg.getWidgetListViewInstance=function(b){var c="{{#subWidgets}}{{{.}}}{{/subWidgets}}";return new a.rg.WidgetView({data:{subWidgets:b},templateName:"widgetListWrapperTemplate",template:Hogan.compile(c,{},"widgetListWrapperTemplate.html")})}},"1.0.0",{requires:["rg.core.form.ErrorPopoverPlugin","rg-validation"]});
"use strict";YUI.add("rg-utils-url",function(a){a.namespace("rg.utils.url");var b,c,d,e,f,g,h,i,j,k,l=document,m=window,n=m.location;b=function(a){var b=/^https?:\/\//;if(b.test(a))return void(l.location=a);var c=l.getElementsByTagName("base");c&&c[0]&&c[0].href&&("/"==c[0].href.substr(c[0].href.length-1)&&"/"==a.charAt(0)&&(a=a.substr(1)),a=c[0].href+a),l.location=a},c=function(){n.hash=""},d=function(a,b){var d;return b!==!0&&(b=!1),d=n.hash==="#"+a,d&&b&&c(),d},e=function(){return n.hash.substr(1)},f=function(a){return n.hash=a,n.hash},g=function(a){var b=a.indexOf("#");return b===-1?a:a.substr(0,b)},h=function(a){var b=g(a),c=b.indexOf("?");return c<0?b:b.substr(0,c)},k=function(a){var b=g(a),c=b.indexOf("?");return c<0?"":b.substr(c+1)},i=function(b){var c=a.one("base").get("href");return b.indexOf(c)===-1?b:b.substr(c.length)},j=function(){return a.rg.utils.url.getUrlWithoutBaseLocation(a.rg.utils.url.getUrlWithoutParams(l.location.href))},a.rg.utils.url.forwardTo=b,a.rg.utils.url.anchorExists=d,a.rg.utils.url.getAnchor=e,a.rg.utils.url.setAnchor=f,a.rg.utils.url.deleteAnchor=c,a.rg.utils.url.getUrlWithoutHash=g,a.rg.utils.url.getUrlWithoutParams=h,a.rg.utils.url.getUrlWithoutBaseLocation=i,a.rg.utils.url.getRelativeLocation=j,a.rg.utils.url.getQueryString=k},"0.0.1",{requires:[]});
"use strict";YUI.add("rg-linkify",function(a){a.namespace("rg");var b=/((([hH][tT][tT][pP][sS]?|[fF][tT][pP])\:\/\/)([\w\.\-]+(\:[\w\.\&%\$\-]+)*@)?((([^\s\(\)<\>\\\"\.\[\]\,@;:\/]+)(\.[^\/\s\(\)<\>\\\"\.\[\]\,@;:]+)*(\.[a-zA-Z]{2,4}))|((([01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}([01]?\d{1,2}|2[0-4]\d|25[0-5])))(\b\:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}|0)\b)?((\/[^\/\s][\w\.\,\?\'\\\/\+&%\$\#\=~_\-\â€“@|:;!\(\)\x7F-\xFF]*)*[^\.\,\?\"\'\[\]!;<>{}\s])?)/g;a.rg.linkify=function(a){return a.replace(b,'<a href="$1" target="_blank">$1</a>')}},"0.0.1");
"use strict";YUI.add("rg-matchhighlighter",function(a){a.namespace("rg");var b=/\[luc0815\](.*?)\[5180luc\]/g;a.rg.matchhighlighter=function(a){return a.replace(b,'<span class="search-result-highlighted">$1</span>')},a.rg.matchhighlighterRemove=function(a){return a.replace(b,"$1")}},"0.0.1");
"use strict";YUI.add("rg-string",function(a){a.namespace("rg.string"),a.rg.string.startsWith=function(a,b){var c=new RegExp("^"+b);return c.test(a)},a.rg.string.arrayPrint=function(a,b,c){if(a.length<1)return"";if(1===a.length)return a[0];var d=a.length-1,e=a[d],f=a.slice(0,d);return f.join(b)+c+e},a.rg.string.shorten=function(b,c){return b.length<=c?b:a.Lang.trim(b.substring(0,c))+"..."},a.rg.string.shortenMiddle=function(a,b,c){var d=Math.ceil(b/2),e=Math.floor(b/2);return c=c?c:"...",a.length>b?a.substr(0,d)+c+a.substr(a.length-e):a},a.rg.string.stripTags=function(a){return a.replace(/(<([^>]+)>)/gi,"")},a.rg.string.wordWrap=function(b,c,d,e){var f,g,h,i,j,k=a.Lang.isUndefined(c)?75:c,l=a.Lang.isUndefined(d)?"\n":d,m=!a.Lang.isUndefined(e)&&e;if(b+="",k<1)return b;for(f=-1,h=(j=b.split(/\r\n|\n|\r/)).length;++f<h;j[f]+=i)for(i=j[f],j[f]="";i.length>k;j[f]+=i.slice(0,g)+((i=i.slice(g)).length?l:""))g=2==m||(g=i.slice(0,k+1).match(/\S*(\s)?$/))[1]?k:g.input.length-g[0].length||1==m&&k||g.input.length+(g=i.slice(k).match(/^\S*/)).input.length;return j.join("\n")},a.rg.string.wordBreak=function(b,c){var d,e=a.rg.string.wordWrap,f=b.split(" "),g=[];a.Lang.isUndefined(c)&&(c=45);var h,i,j='<wbr /><span class="wbr"></span>';for(d=0;d<f.length;d++)h=f[d],i=h.length>=c?e(h,c,j,!0):h,g.push(i);return g.join(" ")},a.rg.string.nodeWordBreak=function(b,c){var d,e=a.rg.string.htmlentities,f=a.rg.string.html_entity_decode,g=a.rg.string.wordBreak,h=a.Node.create("<div>"+b+"</div>"),i="",j=h.get("childNodes"),k=j.size();for(d=0;d<k;d++){var l,m=j.item(d);m.hasChildNodes()&&m.get("firstChild").get("nodeValue")?(l=f(m.get("firstChild").get("nodeValue"),"ENT_QUOTES"),l=e(g(l,c)),l=l.replace(/&lt;wbr \/&gt;&lt;span class=&quot;wbr&quot;&gt;&lt;\/span&gt;/g,'<wbr /><span class="wbr"></span>'),i+="A"===m.get("tagName")?'<a href="'+m.getAttribute("href")+'" target="_blank">'+l+"</a>":'<span class="'+m.getAttribute("class")+'">'+l+"</span>"):m.get("nodeValue")&&(l=f(m.get("nodeValue"),"ENT_QUOTES"),l=e(g(l,c)),l=l.replace(/&lt;wbr \/&gt;&lt;span class=&quot;wbr&quot;&gt;&lt;\/span&gt;/g,'<wbr /><span class="wbr"></span>'),i+=l)}return i},a.rg.string.nl2br=function(a){return"string"==typeof a?a.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br />"):a},a.rg.string.get_html_translation_table=function(a,b){var c,d,e,f,g,h={},i={},j={},k={};if(j[0]="HTML_SPECIALCHARS",j[1]="HTML_ENTITIES",k[0]="ENT_NOQUOTES",k[2]="ENT_COMPAT",k[3]="ENT_QUOTES",f=a?a.toUpperCase():"HTML_SPECIALCHARS",d=isNaN(a)?f:j[a],g=b?b.toUpperCase():"ENT_COMPAT",e=isNaN(b)?g:k[b],"HTML_SPECIALCHARS"!==d&&"HTML_ENTITIES"!==d)throw new Error("Table: "+d+" not supported");h[38]="&amp;","HTML_ENTITIES"===d&&(h[160]="&nbsp;",h[161]="&iexcl;",h[162]="&cent;",h[163]="&pound;",h[164]="&curren;",h[165]="&yen;",h[166]="&brvbar;",h[167]="&sect;",h[168]="&uml;",h[169]="&copy;",h[170]="&ordf;",h[171]="&laquo;",h[172]="&not;",h[173]="&shy;",h[174]="&reg;",h[175]="&macr;",h[176]="&deg;",h[177]="&plusmn;",h[178]="&sup2;",h[179]="&sup3;",h[180]="&acute;",h[181]="&micro;",h[182]="&para;",h[183]="&middot;",h[184]="&cedil;",h[185]="&sup1;",h[186]="&ordm;",h[187]="&raquo;",h[188]="&frac14;",h[189]="&frac12;",h[190]="&frac34;",h[191]="&iquest;",h[192]="&Agrave;",h[193]="&Aacute;",h[194]="&Acirc;",h[195]="&Atilde;",h[196]="&Auml;",h[197]="&Aring;",h[198]="&AElig;",h[199]="&Ccedil;",h[200]="&Egrave;",h[201]="&Eacute;",h[202]="&Ecirc;",h[203]="&Euml;",h[204]="&Igrave;",h[205]="&Iacute;",h[206]="&Icirc;",h[207]="&Iuml;",h[208]="&ETH;",h[209]="&Ntilde;",h[210]="&Ograve;",h[211]="&Oacute;",h[212]="&Ocirc;",h[213]="&Otilde;",h[214]="&Ouml;",h[215]="&times;",h[216]="&Oslash;",h[217]="&Ugrave;",h[218]="&Uacute;",h[219]="&Ucirc;",h[220]="&Uuml;",h[221]="&Yacute;",h[222]="&THORN;",h[223]="&szlig;",h[224]="&agrave;",h[225]="&aacute;",h[226]="&acirc;",h[227]="&atilde;",h[228]="&auml;",h[229]="&aring;",h[230]="&aelig;",h[231]="&ccedil;",h[232]="&egrave;",h[233]="&eacute;",h[234]="&ecirc;",h[235]="&euml;",h[236]="&igrave;",h[237]="&iacute;",h[238]="&icirc;",h[239]="&iuml;",h[240]="&eth;",h[241]="&ntilde;",h[242]="&ograve;",h[243]="&oacute;",h[244]="&ocirc;",h[245]="&otilde;",h[246]="&ouml;",h[247]="&divide;",h[248]="&oslash;",h[249]="&ugrave;",h[250]="&uacute;",h[251]="&ucirc;",h[252]="&uuml;",h[253]="&yacute;",h[254]="&thorn;",h[255]="&yuml;"),"ENT_NOQUOTES"!==e&&(h[34]="&quot;"),"ENT_QUOTES"===e&&(h[39]="&#39;"),h[60]="&lt;",h[62]="&gt;";for(c in h)h.hasOwnProperty(c)&&(i[String.fromCharCode(c)]=h[c]);return i},a.rg.string.html_entity_decode=function(b,c){var d,e,f,g;if(f=b.toString(),(d=a.rg.string.get_html_translation_table("HTML_ENTITIES",c))===!1)return!1;delete d["&"],d["&"]="&amp;";for(e in d)d.hasOwnProperty(e)&&(g=d[e],f=f.split(g).join(e));return f=f.split("&#039;").join("'")},a.rg.string.htmlentities=function(b,c,d,e){var f=a.rg.string.get_html_translation_table("HTML_ENTITIES",c),g="";if(b=null==b?"":b+"",!f)return!1;if(c&&"ENT_QUOTES"===c&&(f["'"]="&#039;"),delete f["&"],e||null==e){b=b.split("&").join("&amp;");for(g in f)f.hasOwnProperty(g)&&(b=b.split(g).join(f[g]))}else b=b.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(a,c,d){b=b.split("&").join("&amp;");for(var e in f)f.hasOwnProperty(e)&&(c=c.split(e).join(f[e]));return c+d});return b},a.rg.string.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.rg.string.convertDashedToCamelCaseNotation=function(b){for(var c=b.split("-"),d=1;d<c.length;d++)c[d]=a.rg.string.ucfirst(c[d]);return c.join("")},a.rg.string.convertDashedObjectKeysToCamelCaseNotation=function(b){var c={};return a.Object.each(b,function(b,d){var e=a.rg.string.convertDashedToCamelCaseNotation(d);c[e]=b}),c}},"0.0.1",{requires:["rg-linkify","rg-matchhighlighter"]});
"use strict";YUI.add("rg-utils-dom",function(a){a.namespace("rg.utils.dom"),a.rg.utils.dom.canAcceptFocus=function(b){return b=a.one(b),"hidden"!=b.getStyle("visibility")&&"none"!=b.getStyle("display")&&!b.get("disabled")},a.rg.utils.dom.disableButton=function(b){b=a.one(b),b.setAttribute("disabled","disabled"),b.addClass("btn-disabled")},a.rg.utils.dom.enableButton=function(b){b=a.one(b),b.removeClass("btn-disabled"),b.removeAttribute("disabled")}},"0.0.1",{requires:[]});
"use strict";YUI.add("rg-overlay",function(a){a.namespace("rg.widget");var b,c,d,e="host",f="renderUI",g="contentBox";!function(){var c="popup",d="y-popup",h="overlayPopup",i="boundingBox",j="y-popup-modal",k=[],l=a.UA.ie>5&&a.UA.ie<9,m=function(){if(0===k.length)return a.one("#page-container");var b=n();return b.get(e).get(i)},n=function(){return k[k.length-1]},o=function(){var a,b,c;a=this.get(e),c=a.get(g),c.addClass(d),b=a.get(i),b.addClass(j),a.get("visible")&&r.call(this)},p=function(a){a.newVal&&this.get(e)._syncUIPosAlign()},q=function(){var b=this.get(e),c=a.one("win"),d=c.get("winHeight");l&&b.get(i).setStyle("height",d+"px")},r=function(){if(this.get("host").get("visible")){if(0===k.length&&a.one("html").addClass("has-overlay"),n()!==this){var b=m();k.push(this),a.fire("rg.popup:opened"),this.get(e).get(i).setStyle("top","0"),a.one("win").set("scrollTop",0),b.addClass("popup-fixed");var c=this.get("bodyScrollTop");b.setStyle("top",-c)}this.get("handleResize")&&(this.resizeHandler=a.on("windowresize",q,this),this.contentUpdateHandler=this.get("host").after("contentUpdate",q,this),s.call(this),q.call(this))}else{k.pop(),0===k.length&&a.one("html").removeClass("has-overlay");var d=m();a.fire("rg.popup:closed"),d.getDOMNode()&&(d.removeClass("popup-fixed"),d.setStyle("top",null)),a.one("win").set("scrollTop",this.get("bodyScrollTop")),this.get("handleResize")&&(this.resizeHandler.detach(),this.contentUpdateHandler.detach(),this.get("timer").cancel())}this.get("hideOnClickOutside")?this.get(e).get(i).on("click",u,this):this.get(e).get(i).detach("click",u,this)},s=function(){this.set("timer",a.later(1e3,this,function(){q.call(this)},[],!0))},t=function(){var b=this.get(e),c=a.Node.create('<div class="y-popup-container"></div>');b.get(i).appendChild(c),c.appendChild(b.get(g)),this.set("bodyScrollTop",a.one("win").get("scrollTop"))},u=function(a){var b=this.get(e);a.target.contains(b.get(g))&&b.hide()};b=a.Base.create(h,a.Plugin.Base,[],{initializer:function(){this.beforeHostMethod(f,t,this),this.afterHostMethod(f,o,this),this.after("hideOnClickOutsideChange",function(){this.resizeHandler&&this.resizeHandler.detach(),r.call(this)},this),this.after("handleResizeChange",function(){this.get(e).get(i).detach("click",u,this),r.call(this)},this),this.get(e).get(i).delegate("click",function(){this.get(e).hide()},".js-close",this),this.doBefore("visibleChange",function(){this.get("host").get("visible")||this.set("bodyScrollTop",a.one("win").get("scrollTop"))},this),this._onFocusOutisde=this.get(e).get(i).on("focusoutside",function(a){n()!==this&&a.stopImmediatePropagation()},this),this._visibleChangeBeforeHandle=this.doBefore("visibleChange",p,this),this._visibleChangeAfterHandle=this.get("host").after("visibleChange",r,this)},destructor:function(){this.get("host").get("visible")&&(this.get("host").set("visible",!1),r.call(this)),this._visibleChangeAfterHandle.detach(),this._visibleChangeBeforeHandle.detach(),this._onFocusOutisde.detach()}},{NS:c,ATTRS:{timer:{value:null},handleResize:{value:!0},hideOnClickOutside:{value:!0},bodyScrollTop:{value:null}}})}(),function(){var b="closeable",d="overlayCloseable",h='<div class="close"><a class="js-dialog-close" href="javascript:" onclick="return false;"></a></div>',i=function(){var b,c,d,f;b=this.get(e),c=b.get(g),c.setStyle("position","relative"),d=a.Node.create(h),f=d.one(".js-dialog-close"),f.setContent('<span class="ico-x-close-light"></span>'),c.append(d),f.on("click",b.hide,b)};c=a.Base.create(d,a.Plugin.Base,[],{initializer:function(){this.afterHostMethod(f,i,this)},destructor:function(){var a;window.CustomEvent&&"function"==typeof window.CustomEvent?a=new CustomEvent("rg.popup:closed"):(a=document.createEvent("CustomEvent"),a.initCustomEvent("rg.popup:closed",!0,!0,{})),window.dispatchEvent(a)}},{NS:b})}(),function(){var e=1001,f=1,g=[],h=function(){var a=void 0;return a=0===g.length?e:g[g.length-1]+f,g.push(a),a},i=function(){return g.pop()};d=a.Base.create("Overlay",a.Overlay,[],{initializer:function(d){d.plugins=a.mix([a.Plugin.OverlayModal,{fn:a.Plugin.OverlayAutohide,cfg:{focusedOutside:!1,clickedOutside:!1,pressedEscape:!0}},{fn:b,cfg:{handleResize:d.handleResize,hideOnClickOutside:d.hideOnClickOutside}},c],d.plugins),d.autoStack?(this.set("zIndex",h()),this.set("autoStack",d.autoStack)):this.set("zIndex",d.zIndex&&"auto"!==d.zIndex?d.zIndex:1001),this._resolveFn=d.resolve,this._rejectFn=d.reject,this._hasResult=!1,this.on("bodyContentChange",function(){this.get("autoFocusInput")&&a.Lang.later(200,this,function(){var b=this.getStdModNode(a.WidgetStdMod.BODY);if(b){var c=b.all("input[type=text],textarea");if(!c.isEmpty()){var d=c._nodes[0];d&&a.rg.utils.dom.canAcceptFocus(d)&&d.focus()}}})})},destructor:function(){if(i(),this._rejectFn&&!this._hasResult){var a=new Error("Dialog cancelled");a.isCancelled=!0,this._rejectFn(a)}},scaleToViewport:function(b,c){var d=a.one("body").get("winHeight"),e=this.getStdModNode(a.WidgetStdMod.BODY),f=e.get("offsetHeight"),g=e.getY(),h=a.one(".yui3-overlay-modal"),i=b.get("offsetHeight"),j=f-i,k=150,l=50,m=d-(g+l+j),n=Math.max(m,k);b.setStyle("overflowY","auto"),c===!0&&n>b.get("offsetHeight")&&b.setStyle("height",n),b.setStyle("maxHeight",n);var o=n+g+l+j;return h.setStyle("overflow","hidden"),h.setStyle("height",o-5),n},resolve:function(a){this._resolveFn(a),this._hasResult=!0,this.destroy()},reject:function(a){this._rejectFn(a),this._hasResult=!0,this.destroy()},configure:function(a){"undefined"!=typeof a.hideOnClickOutside&&this.hasPlugin("popup").set("hideOnClickOutside",a.hideOnClickOutside),"undefined"!=typeof a.handleResize&&this.hasPlugin("popup").set("handleResize",a.handleResize),this.render(),this.get("autoStack")?this.get("zIndex")||this.set("zIndex",h()):this.set("zIndex",a.zIndex&&"auto"!==a.zIndex?a.zIndex:1001)}},{ATTRS:{autoFocusInput:{value:!0}}})}(),a.rg.widget.OverlayPopup=b,a.rg.widget.OverlayCloseable=c,a.rg.widget.Dialog=d},"0.0.1",{requires:["overlay","gallery-overlay-extras","rg-utils-dom"]});
"use strict";YUI.add("rg-widgetloader-renderers",function(a){a.namespace("rg.widget");var b=a.Base.create("DestroyWidgetOnDialogHide",a.Plugin.Base,[],{initializer:function(){this.afterHostMethod("hide",function(){if(this.get("widget")){var a=this.get("widget"),b=a.get("container");if(b){var c=b.all("*");c.set("nodes",c.get("nodes").reverse()),c.unplug(),b.unplug()}a._isReact===!0&&Helpers.unmountReactComponent(a.id)}this.get("host").destroy(!0)},this)},destructor:function(){}},{NS:"DestroyWidgetOnDialogHide",ATTRS:{widget:{value:null}}});a.rg.widget.DestroyWidgetOnDialogHide=b,a.rg.widget.ReplaceRenderer=function(b,c,d){if("string"==typeof d&&(d=a.one(d)),!d)return!1;if(!d._node)return!1;if(!d.get("parentNode"))return!1;var e=c.getAttribute("class"),f=d.getData();f&&f.widget&&f.widget.dialog&&(b.dialog=f.widget.dialog,b.dialog.DestroyWidgetOnDialogHide.set("widget",b),f.widget.stackNodeClasses&&(a.Array.each(f.widget.stackNodeClasses.split(" "),function(a){b.dialog._stackNode.removeClass(a)}),b.dialog._stackNode.addClass(e),c.hasClass("js-full-dialog")&&b.dialog._stackNode.addClass("full-dialog"))),b.setContainer(c),d.replace(b.get("container")),d.destroy(!0)},a.rg.widget.ReplaceContentRenderer=function(b,c,d){return"string"==typeof d&&(d=a.one(d)),!!d&&(b.setContainer(c),d.get("children").destroy(!0),d.setContent(""),void d.append(b.get("container")))},a.rg.widget.RefreshRenderer=function(a,b){if(!a.get("container"))throw new Error("can not refresh a widget that has not been rendered before");return a.dialog?void(b.hasClass("js-full-dialog")||b.hasClass("react-container")?a.dialog.set("bodyContent",b.getContent()):(a.dialog.set("headerContent",b.one(".yui3-widget-hd")?b.one(".yui3-widget-hd").getContent():null),a.dialog.set("bodyContent",b.one(".yui3-widget-bd")?b.one(".yui3-widget-bd").getContent():null),a.dialog.set("footerContent",b.one(".yui3-widget-ft")?b.one(".yui3-widget-ft").getContent():null))):(a.get("container").empty(!0),a.get("container").setContent(b.getContent()),void a.get("container").addClass("widget"))},a.rg.widget.AppendRenderer=function(b,c,d){return"string"==typeof d&&(d=a.one(d)),!!d&&(b.setContainer(c),void d.append(b.get("container")))},a.rg.widget.BeforeNodeRenderer=function(b,c,d){return"string"==typeof d&&(d=a.one(d)),!!d&&(b.setContainer(c),void d.insert(b.get("container"),"before"))},a.rg.widget.AfterNodeRenderer=function(b,c,d){return"string"==typeof d&&(d=a.one(d)),!!d&&(b.setContainer(c),void d.insert(b.get("container"),"after"))},a.rg.widget.PrependRenderer=function(b,c,d){return"string"==typeof d&&(d=a.one(d)),!!d&&(b.setContainer(c),void d.prepend(b.get("container")))},a.rg.widget.OpenedDialogRenderer=function(){var c=function(c,d){var e=a.merge(d,{render:!1,visible:!0,bodyContent:'<div class="rendering"></div>',id:null}),f=new a.rg.widget.Dialog(e);return c&&f._stackNode.addClass(c),f.plug(b),d&&d.hideMask&&f.unplug(a.Plugin.OverlayModal),f.render(),f.show(),f},d=function(b,c,d){if(a.one("#"+b.id))return!1;if(!d)return!1;if(!d.get("visible"))return!1;if(b.dialog=d,b.dialog.configure(b.getDefaultDialogConfig()),11===c.getDOMNode().nodeType&&a.log("The dialog container is a document fragment - check your markup."),c.hasClass("js-full-dialog")||c.hasClass("react-container"))b.dialog.set("bodyContent",c),c.addClass("full-dialog"),b.setContainer(c);else{var e=c.one(".yui3-widget-hd"),f=c.one(".yui3-widget-bd"),g=c.one(".yui3-widget-ft");e||f||g||a.log("You must either set the class js-full-dialog on your dialog or provide at least one of .yui3-widget-{hd,bd,ft}, else your dialog will be empty"),b.dialog.set("headerContent",e?e.getContent():null),b.dialog.set("bodyContent",f?f.getContent():null),b.dialog.set("footerContent",g?g.getContent():null),b.dialog._stackNode.setAttribute("id",b.id),b.setContainer(b.dialog._stackNode)}b.dialog.DestroyWidgetOnDialogHide.set("widget",b);var h=c.getAttribute("class");b.dialog._stackNode.addClass(h),b.stackNodeClasses=h};return{createDialog:c,renderDialog:d}}(),a.rg.widget.DialogRenderer=function(c,d,e){if(a.one("#"+c.id))return!1;if(e=a.merge(e,c.getDefaultDialogConfig()),e=d.hasClass("js-full-dialog")||d.hasClass("react-container")?a.merge(e,{render:!1,visible:!1,headerContent:null,bodyContent:d,footerContent:null}):a.merge(e,{render:!1,visible:!1,headerContent:d.one(".yui3-widget-hd")?d.one(".yui3-widget-hd").getContent():null,bodyContent:d.one(".yui3-widget-bd")?d.one(".yui3-widget-bd").getContent():null,footerContent:d.one(".yui3-widget-ft")?d.one(".yui3-widget-ft").getContent():null,id:c.id}),c.getCustomDialogName){var f=a.Base.create(c.getCustomDialogName(),a.rg.widget.Dialog,[]);c.dialog=new f(e)}else c.dialog=new a.rg.widget.Dialog(e);c.dialog.plug(b),c.dialog.render(),d.hasClass("js-full-dialog")||d.hasClass("react-container")?(d.addClass("full-dialog"),c.setContainer(d)):(c.dialog._stackNode.addClass(d.getAttribute("class")),c.setContainer(c.dialog._stackNode),c.dialog.DestroyWidgetOnDialogHide.set("widget",c));var g=d.getAttribute("class");c.dialog._stackNode.addClass(g),c.stackNodeClasses=g,c.dialog.show()},a.rg.widget.DialogSectionRenderer=function(b,c,d){if(a.one("#"+b.id))return!1;var e=d.hasPlugin("DestroyWidget"),f=e.widget;b.dialog=f.dialog,f.set("container",null),b.dialog.set("headerContent",c.one(".yui3-widget-hd")?c.one(".yui3-widget-hd").getContent():null),b.dialog.set("bodyContent",c.one(".yui3-widget-bd")?c.one(".yui3-widget-bd").getContent():null),b.dialog.set("footerContent",c.one(".yui3-widget-ft")?c.one(".yui3-widget-ft").getContent():null),b.dialog.DestroyWidgetOnDialogHide.set("widget",b),d.unplug("DestroyWidget"),b.dialog._stackNode.set("id",b.id),b.setContainer(b.dialog._stackNode)},a.rg.widget.TooltipRenderer=function(){var b=function(b,c){return c=a.merge(c,{content:'<div class="rendering"></div>'}),b.plug(a.rg.widget.TooltipPlugin,c),b.tooltip},c=function(b,c,d){return!a.one("#"+b.id)&&(!!d&&(b.tooltip=d,void d.set("content",c)))};return{createTooltip:b,renderTooltip:c}}()},"0.0.1",{requires:["rg-utils-url","rg-string","rg-overlay","rg-tooltip"]});
"use strict";YUI.add("rg.core.util.ParameterFilter",function(a){a.namespace("rg.core.util");var b,c=window;a.rg.core.util.ParameterFilter={filterUrl:function(c){var d,e,f,g,h,i,j,k,l,m,n=!1;if(!b)return c;if(d=c.indexOf("#"),d===-1?e=c:(e=c.substr(0,d),f=c.substr(d+1)),g=e.indexOf("?"),g!==-1){h=e.substr(0,g),i=e.substr(g+1),j=a.QueryString.parse(i);for(k in b)b.hasOwnProperty(k)&&(l=b[k],j[l]&&(n=!0,delete j[l]));for(k in j)j.hasOwnProperty(k)&&"_"===k.substr(0,1)&&(n=!0,delete j[k]);if(n)return i=a.QueryString.stringify(j),m=h,i&&(m=m+"?"+i),f&&(m=m+"#"+f),m}return c},filter:function(d){var e=this;d?b=d:d=b,d&&c.history&&c.history.replaceState&&a.on("load",function(){var b=c.location.href,d=e.filterUrl(b);d!==b&&(c.history.replaceState(null,null,d),a.fire("ParameterFilter:historyStateReplaced"))})}}},"1.0.0",{requires:["querystring"]});
"use strict";YUI.add("rg-widgetloader-pushstate",function(a){a.namespace("rg"),a.namespace("rg.widget");var b,c="rendering";a.rg.CSS_RENDERING=c,a.rg.changePageLayout=b=function(b){var d=b.pageLayout;if(d)for(var e in d)if(d.hasOwnProperty(e)){var f=a.one(e),g=d[e];f.hasClass(c)&&(g+=" "+c),f.setAttribute("class",g)}b.pageTitle&&(document.title=b.pageTitle)};var d=function(b,c){var d={popStateUrl:null,pushStateUrl:null,widget:null},e=a.merge(d,c);a.fire(b,e)};a.rg.emptyStateHandler=function(){};var e=!1,f=function(){var f;e||(f=window.location.href,e=!0,window.onpopstate=function(e){var g,h,i,j,k,l,m,n,o,p,q;if(!e.state||!e.state.pushStateUrl)return void a.rg.emptyStateHandler(f);if(g=e.state.pushStateUrl,h=e.state.targetContainer,i=e.state.renderer,j=e.state.beforeLoadEvent,k=e.state.beforeEvent,l=e.state.afterEvent,m=e.state.afterRenderedEvent,o=e.state.disablePageChangeLayout,p=e.state.pushStateConfig,q=e.state.additionalEventPayload,p)for(var r in p)if(p.hasOwnProperty(r)){if(n=a.one(r),!n)continue;g=p[r].url,i=p[r].renderer;break}n||(n=a.one(h)),j&&d(j,{popStateUrl:g,additionalEventPayload:q}),n.addClass(c),a.rg.cancelRunningRequests(),a.rg.addRequestToStack(widgetLoader.loadWidget(g,{},function(a){var e={before:function(){k&&d(k,{popStateUrl:g,widget:a,additionalEventPayload:q})},after:function(){o||b(a),l&&d(l,{popStateUrl:g,widget:a,additionalEventPayload:q})},afterRendered:function(){n&&n.getDOMNode()&&n.removeClass(c),m&&d(m,{popStateUrl:g,widget:a,additionalEventPayload:q})}};e[i]=n,a.render(e)},this,!0))})},g=function(a,e,f,g){var h={before:function(){a.beforeEvent&&d(a.beforeEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},after:function(){a.disablePageChangeLayout||b(e),a.afterEvent&&d(a.afterEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},afterRendered:function(){g&&g.getDOMNode()&&g.removeClass(c),a.afterRenderedEvent&&d(a.afterRenderedEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})}};return h[f]=g,h};a.rg.widget.handleAjaxPageLoad=function(b){if(2!==b.button&&!b._event.defaultPrevented){b.preventDefault();var c=b.currentTarget,d=c.getAttribute("href"),e=c.hasAttribute("data-pushState-config")?a.JSON.parse(c.getAttribute("data-pushState-config")):null,f="replaceContent",g="#content",h=c.hasAttribute("data-beforeload-event")?c.getAttribute("data-beforeload-event"):null,i=c.hasAttribute("data-before-event")?c.getAttribute("data-before-event"):null,j=c.hasAttribute("data-after-event")?c.getAttribute("data-after-event"):null,k=c.hasAttribute("data-after-rendered-event")?c.getAttribute("data-after-rendered-event"):null,l=c.hasAttribute("data-disable-layout-change")?c.getAttribute("data-disable-layout-change"):null,m=c.hasAttribute("data-additional-event-payload")?c.getAttribute("data-additional-event-payload"):null,n=!!c.hasAttribute("data-disable-history")&&"true"===c.getAttribute("data-disable-history");if(this.onHandleAjaxPageLoad&&this.onHandleAjaxPageLoad.call(this,b),!b.preventAjaxPageLoad){var o={renderer:f,targetContainer:g,beforeLoadEvent:h,beforeEvent:i,afterEvent:j,afterRenderedEvent:k,disablePageChangeLayout:l,pushStateUrl:d,pushStateConfig:e,additionalEventPayload:m,disableHistory:n};a.rg.widget.ajaxPageLoad({},o)}}},a.rg.widget.ajaxPageLoad=function(b,e,h,i){var j,k,l,m,n={};if(e.pushStateConfig)for(m in e.pushStateConfig)if(e.pushStateConfig.hasOwnProperty(m)){if(l=a.one(m),!l)continue;j=e.pushStateConfig[m].url,k=e.pushStateConfig[m].renderer;break}e.pushStateUrlFiltered=a.rg.core.util.ParameterFilter.filterUrl(e.pushStateUrl),j&&k&&l||(j=e.pushStateUrl,k=e.renderer,l=a.one(e.targetContainer)),l.addClass(c);var o=a.StyleSheet(l.generateID()),p=m||e.targetContainer;return o.set(p+"."+c,{minHeight:"100%",overflow:"hidden"}),!a.rg.supportsPushState()||e.disableHistory?void widgetLoader.loadWidget(j,b,function(a){n[k]=l,a.render(n),h&&h.call(a,i)},this,null,"GET",{"x-push-state":1}):(e.beforeLoadEvent&&d(e.beforeLoadEvent,{pushStateUrl:e.pushStateUrl,additionalEventPayload:e.additionalEventPayload}),f(),history.pushState(e,e.pushStateUrlFiltered,e.pushStateUrlFiltered),a.rg.cancelRunningRequests(),void a.rg.addRequestToStack(widgetLoader.loadWidget(j,b,function(b){b.success?(n=g(e,b,k,l),b.render(n)):widgetLoader.createWidget({id:"PageLoadError",templateName:"application/stubs/Error.html",data:{widgetId:"PageLoadError",errorCode:b.errorCode,correlationId:b.correlationId}},function(a){n=g(e,a,k,l),a.render(n)},this),a.Lang.isFunction(h)&&h.call(i,b)},this,!0,"GET",{"x-push-state":1})))},a.rg.supportsPushState=function(){return!(!window.history||!history.pushState)},a.rg.supportsReplaceState=function(){return!(!window.history||!history.replaceState)},a.rg.requestStack=[],a.rg.addRequestToStack=function(b){a.rg.requestStack.push(b)},a.rg.cancelRunningRequests=function(){a.rg.requestStack=a.Array.filter(a.rg.requestStack,function(a){return a&&a.isInProgress&&a.isInProgress()&&a.abort(),!1})},a.on("load",function(){a.later(1e3,this,function(){a.rg.emptyStateHandler=function(b){a.rg.utils.url.forwardTo(b)}})})},"0.0.1",{requires:["json","stylesheet","rg-utils-url","rg.core.util.ParameterFilter"]});
"use strict";YUI.add("rg.core.pagespeed.Monitoring",function(a){a.namespace("rg.core.pagespeed");var b=window.performance;a.rg.core.pagespeed.Monitoring={trackByImage:function(a,b){return Helpers.trackByImage(a,b)},monitorPage:function(b,c,d,e,f){var g=this;a.on("load",function(){a.later(3e3,g,function(){g.monitorPageLoad(b,c,d,e,f),g.monitorResources(b,c,d)})})},monitorPageLoad:function(a,c,d,e,f){var g,h;if(b&&b.timing&&window.rgConfig&&window.rgConfig.backendTime){g=b.timing,h=g.loadEventEnd?g.loadEventEnd:(new Date).getTime();var i=g.connectEnd-g.connectStart,j=g.responseEnd-g.requestStart,k=h-g.domLoading,l=h-g.navigationStart,m=g.responseStart-g.requestStart,n=g.domComplete-g.domLoading,o=g.loadEventStart?h-g.loadEventStart:0,p=g.domInteractive-g.domLoading,q=g.domComplete-g.domInteractive,r=Math.max(0,g.domainLookupEnd-g.domainLookupStart),s=g.domContentLoadedEventEnd-g.domLoading,t=0;g.secureConnectionStart&&(t=g.connectEnd-g.secureConnectionStart);var u=!1;i<0||j<0||k<0||l<0||m<0||(i>6e4&&(u=!0),j>6e4&&(u=!0),k>6e4&&(u=!0),l>6e4&&(u=!0),m>6e4&&(u=!0),u&&(c=window.rgConfig.longRunningRequestIdentifier,d=window.rgConfig.longRunningRequestFp),this.trackByImage(a,{correlationId:e,cfp:f,page:c,fp:d,connectTime:i,requestTime:j,renderTime:k,completeRequestTime:l,firstContentTime:m,backendTime:window.rgConfig.backendTime,domProcessingTime:n,loadEventTime:o,domLoadingTime:p,domCompletionTime:q,dnsLookupTime:r,sslHandshakeTime:t,domContentLoadingTime:s,continent:window.rgConfig.continent.replace(" ","_")}))}},monitorResources:function(c,d,e){if(b&&b.getEntriesByType&&"function"==typeof b.getEntriesByType&&window.rgConfig&&window.rgConfig.continent){var f=b.getEntriesByType("resource"),g={css:{count:0,totalDuration:0},js:{count:0,totalDuration:0},html:{count:0,totalDuration:0},image:{count:0,totalDuration:0}},h=0,i=0;a.Array.each(f,function(a){var b;if(a.name.match(/\.css$/))b="css";else if(a.name.match(/\.js$/))b="js";else if(a.name.match(/\.html$/))b="html";else{if(!a.name.match(/\.(png|jpeg|jpg|gif)$/))return;b="image"}g[b].count++,g[b].totalDuration+=parseInt(a.duration,10)}),a.Array.each(a.rg.performedRequests,function(a){h++,i+=parseInt(a.duration,10)});var j={page:d,fp:e,cssCount:g.css.count,cssTotalDuration:Math.max(0,g.css.totalDuration),jsCount:g.js.count,jsTotalDuration:Math.max(0,g.js.totalDuration),htmlCount:g.html.count,htmlTotalDuration:Math.max(0,g.html.totalDuration),imageCount:g.image.count,imageTotalDuration:Math.max(0,g.image.totalDuration),ajaxCount:h,ajaxTotalDuration:Math.max(0,i),continent:window.rgConfig.continent};a.fire("measuredResourceTimings",j),this.trackByImage(c,j)}}}},"1.0.0",{requires:["querystring","node"]});
